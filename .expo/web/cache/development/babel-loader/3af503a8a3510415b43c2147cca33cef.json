{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nimport { reportFatalErrorOnJS } from \"./errors\";\nimport NativeReanimatedModule from \"./NativeReanimated\";\nimport { isChromeDebugger, isJest } from \"./PlatformChecker\";\nimport { runOnJS, setupMicrotasks, callMicrotasks, runOnUIImmediately } from \"./threads\";\nvar _worklet_2058902618278_init_data = {\n  code: \"function callGuardDEV(fn) {\\n  for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\\n    args[_key - 1] = arguments[_key];\\n  }\\n  try {\\n    fn(...args);\\n  } catch (e) {\\n    if (global.__ErrorUtils) {\\n      global.__ErrorUtils.reportFatalError(e);\\n    } else {\\n      throw e;\\n    }\\n  }\\n}\",\n  location: \"/Users/Shoaib/Awesome/node_modules/react-native-reanimated/lib/module/reanimated2/initializers.js\",\n  sourceMap: \"{\\\"version\\\":3,\\\"names\\\":[\\\"callGuardDEV\\\",\\\"fn\\\",\\\"_len\\\",\\\"arguments\\\",\\\"length\\\",\\\"args\\\",\\\"Array\\\",\\\"_key\\\",\\\"e\\\",\\\"global\\\",\\\"__ErrorUtils\\\",\\\"reportFatalError\\\"],\\\"sources\\\":[\\\"/Users/Shoaib/Awesome/node_modules/react-native-reanimated/lib/module/reanimated2/initializers.js\\\"],\\\"mappings\\\":\\\"AAKA,SAAAA,aAAAC,EAAA;EAAA,SAAAC,IAAA,GAAAC,SAAA,CAAAC,MAAA,EAAAC,IAAA,OAAAC,KAAA,CAAAJ,IAAA,OAAAA,IAAA,WAAAK,IAAA,MAAAA,IAAA,GAAAL,IAAA,EAAAK,IAAA;IACAF,IAAA,CAASE,IAAA,QAAYJ,SAAK,CAAAI,IAAA;EAGxB;MACE;IACFN,EAAA,IAAAI,IAAA;EACA,SAAIG,CAAA;IACF,IAAGC,MAAO,CAACC,YAAA;MACXD,MAAQ,CAAAC,YAAE,CAAAC,gBAAA,CAAAH,CAAA;IACV,OAAI;MACF,MAAMA,CAAC;IACT\\\"}\"\n};\n\nvar callGuardDEV = function () {\n  var _e = [new global.Error(), 1, -27];\n\n  var _f = function _f(fn) {\n    for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n      args[_key - 1] = arguments[_key];\n    }\n\n    try {\n      fn.apply(void 0, args);\n    } catch (e) {\n      if (global.__ErrorUtils) {\n        global.__ErrorUtils.reportFatalError(e);\n      } else {\n        throw e;\n      }\n    }\n  };\n\n  _f._closure = {};\n  _f.__initData = _worklet_2058902618278_init_data;\n  _f.__workletHash = 2058902618278;\n  _f.__stackDetails = _e;\n  _f.__version = \"3.3.0\";\n  return _f;\n}();\n\nvar _worklet_7622902604485_init_data = {\n  code: \"function valueUnpacker(objectToUnpack, category) {\\n  let workletsCache = global.__workletsCache;\\n  let handleCache = global.__handleCache;\\n  if (workletsCache === undefined) {\\n    workletsCache = global.__workletsCache = new Map();\\n    handleCache = global.__handleCache = new WeakMap();\\n  }\\n  const workletHash = objectToUnpack.__workletHash;\\n  if (workletHash !== undefined) {\\n    let workletFun = workletsCache.get(workletHash);\\n    if (workletFun === undefined) {\\n      const initData = objectToUnpack.__initData;\\n      if (global.evalWithSourceMap) {\\n        workletFun = global.evalWithSourceMap('(' + initData.code + '\\\\n)', initData.location, initData.sourceMap);\\n      } else if (global.evalWithSourceUrl) {\\n        workletFun = global.evalWithSourceUrl('(' + initData.code + '\\\\n)', \\\"worklet_\\\" + workletHash);\\n      } else {\\n        workletFun = eval('(' + initData.code + '\\\\n)');\\n      }\\n      workletsCache.set(workletHash, workletFun);\\n    }\\n    const functionInstance = workletFun.bind(objectToUnpack);\\n    objectToUnpack._recur = functionInstance;\\n    return functionInstance;\\n  } else if (objectToUnpack.__init) {\\n    let value = handleCache.get(objectToUnpack);\\n    if (value === undefined) {\\n      value = objectToUnpack.__init();\\n      handleCache.set(objectToUnpack, value);\\n    }\\n    return value;\\n  } else if (category === 'RemoteFunction') {\\n    const fun = function () {\\n      throw new Error(\\\"Tried to synchronously call a non-worklet function on the UI thread.\\\\n\\\\nPossible solutions are:\\\\n  a) If you want to synchronously execute this method, mark it as a worklet\\\\n  b) If you want to execute this function on the JS thread, wrap it using `runOnJS`\\\");\\n    };\\n    fun.__remoteFunction = objectToUnpack;\\n    return fun;\\n  } else {\\n    throw new Error('data type not recognized by unpack method');\\n  }\\n}\",\n  location: \"/Users/Shoaib/Awesome/node_modules/react-native-reanimated/lib/module/reanimated2/initializers.js\",\n  sourceMap: \"{\\\"version\\\":3,\\\"names\\\":[\\\"valueUnpacker\\\",\\\"objectToUnpack\\\",\\\"category\\\",\\\"workletsCache\\\",\\\"global\\\",\\\"__workletsCache\\\",\\\"handleCache\\\",\\\"__handleCache\\\",\\\"undefined\\\",\\\"Map\\\",\\\"WeakMap\\\",\\\"workletHash\\\",\\\"__workletHash\\\",\\\"workletFun\\\",\\\"get\\\",\\\"initData\\\",\\\"__initData\\\",\\\"evalWithSourceMap\\\",\\\"code\\\",\\\"location\\\",\\\"sourceMap\\\",\\\"evalWithSourceUrl\\\",\\\"eval\\\",\\\"set\\\",\\\"functionInstance\\\",\\\"bind\\\",\\\"_recur\\\",\\\"__init\\\",\\\"value\\\",\\\"fun\\\",\\\"Error\\\",\\\"__remoteFunction\\\"],\\\"sources\\\":[\\\"/Users/Shoaib/Awesome/node_modules/react-native-reanimated/lib/module/reanimated2/initializers.js\\\"],\\\"mappings\\\":\\\"AAsBA,SAAAA,aAASA,CAAcC,cAAA,EAAcC,QAAE,EAAQ;EAG7C,IAAIC,aAAa,GAAGC,MAAM,CAACC,eAAe;EAC1C,IAAIC,WAAW,GAAGF,MAAM,CAACG,aAAa;EACtC,IAAIJ,aAAa,KAAKK,SAAS,EAAE;IAE/BL,aAAa,GAAGC,MAAM,CAACC,eAAe,GAAG,IAAII,GAAG,CAAC,CAAC;IAClDH,WAAW,GAAGF,MAAM,CAACG,aAAa,GAAG,IAAIG,OAAO,CAAC,CAAC;EACpD;EACA,MAAMC,WAAW,GAAGV,cAAc,CAACW,aAAa;EAChD,IAAID,WAAW,KAAKH,SAAS,EAAE;IAC7B,IAAIK,UAAU,GAAGV,aAAa,CAACW,GAAG,CAACH,WAAW,CAAC;IAC/C,IAAIE,UAAU,KAAKL,SAAS,EAAE;MAC5B,MAAMO,QAAQ,GAAGd,cAAc,CAACe,UAAU;MAC1C,IAAIZ,MAAM,CAACa,iBAAiB,EAAE;QAK5BJ,UAAU,GAAGT,MAAM,CAACa,iBAAiB,CAAC,GAAG,GAAGF,QAAQ,CAACG,IAAI,GAAG,KAAK,EAAEH,QAAQ,CAACI,QAAQ,EAAEJ,QAAQ,CAACK,SAAS,CAAC;MAC3G,CAAC,MAAM,IAAIhB,MAAM,CAACiB,iBAAiB,EAAE;QAKnCR,UAAU,GAAGT,MAAM,CAACiB,iBAAiB,CAAC,GAAG,GAAGN,QAAQ,CAACG,IAAI,GAAG,KAAK,eAAaP,WAAa,CAAC;MAC9F,CAAC,MAAM;QAGLE,UAAU,GAAGS,IAAI,CAAC,GAAG,GAAGP,QAAQ,CAACG,IAAI,GAAG,KAAK,CAAC;MAChD;MACAf,aAAa,CAACoB,GAAG,CAACZ,WAAW,EAAEE,UAAU,CAAC;IAC5C;IACA,MAAMW,gBAAgB,GAAGX,UAAU,CAACY,IAAI,CAACxB,cAAc,CAAC;IACxDA,cAAc,CAACyB,MAAM,GAAGF,gBAAgB;IACxC,OAAOA,gBAAgB;EACzB,CAAC,MAAM,IAAIvB,cAAc,CAAC0B,MAAM,EAAE;IAChC,IAAIC,KAAK,GAAGtB,WAAW,CAACQ,GAAG,CAACb,cAAc,CAAC;IAC3C,IAAI2B,KAAK,KAAKpB,SAAS,EAAE;MACvBoB,KAAK,GAAG3B,cAAc,CAAC0B,MAAM,CAAC,CAAC;MAC/BrB,WAAW,CAACiB,GAAG,CAACtB,cAAc,EAAE2B,KAAK,CAAC;IACxC;IACA,OAAOA,KAAK;EACd,CAAC,MAAM,IAAI1B,QAAQ,KAAK,gBAAgB,EAAE;IACxC,MAAM2B,GAAG,GAAG,SAAAA,CAAA,EAAM;MAChB,MAAM,IAAIC,KAAK,oQAIiE,CAAC;IACnF,CAAC;IACDD,GAAG,CAACE,gBAAgB,GAAG9B,cAAc;IACrC,OAAO4B,GAAG;EACZ,CAAC,MAAM;IACL,MAAM,IAAIC,KAAK,CAAC,2CAA2C,CAAC;EAC9D;AACF\\\"}\"\n};\n\nvar valueUnpacker = function () {\n  var _e = [new global.Error(), 1, -27];\n\n  var _f = function _f(objectToUnpack, category) {\n    var workletsCache = global.__workletsCache;\n    var handleCache = global.__handleCache;\n\n    if (workletsCache === undefined) {\n      workletsCache = global.__workletsCache = new Map();\n      handleCache = global.__handleCache = new WeakMap();\n    }\n\n    var workletHash = objectToUnpack.__workletHash;\n\n    if (workletHash !== undefined) {\n      var workletFun = workletsCache.get(workletHash);\n\n      if (workletFun === undefined) {\n        var initData = objectToUnpack.__initData;\n\n        if (global.evalWithSourceMap) {\n          workletFun = global.evalWithSourceMap('(' + initData.code + '\\n)', initData.location, initData.sourceMap);\n        } else if (global.evalWithSourceUrl) {\n          workletFun = global.evalWithSourceUrl('(' + initData.code + '\\n)', `worklet_${workletHash}`);\n        } else {\n          workletFun = eval('(' + initData.code + '\\n)');\n        }\n\n        workletsCache.set(workletHash, workletFun);\n      }\n\n      var functionInstance = workletFun.bind(objectToUnpack);\n      objectToUnpack._recur = functionInstance;\n      return functionInstance;\n    } else if (objectToUnpack.__init) {\n      var value = handleCache.get(objectToUnpack);\n\n      if (value === undefined) {\n        value = objectToUnpack.__init();\n        handleCache.set(objectToUnpack, value);\n      }\n\n      return value;\n    } else if (category === 'RemoteFunction') {\n      var fun = function fun() {\n        throw new Error(`Tried to synchronously call a non-worklet function on the UI thread.\n\nPossible solutions are:\n  a) If you want to synchronously execute this method, mark it as a worklet\n  b) If you want to execute this function on the JS thread, wrap it using \\`runOnJS\\``);\n      };\n\n      fun.__remoteFunction = objectToUnpack;\n      return fun;\n    } else {\n      throw new Error('data type not recognized by unpack method');\n    }\n  };\n\n  _f._closure = {};\n  _f.__initData = _worklet_7622902604485_init_data;\n  _f.__workletHash = 7622902604485;\n  _f.__stackDetails = _e;\n  _f.__version = \"3.3.0\";\n  return _f;\n}();\n\nvar _worklet_9468165435498_init_data = {\n  code: \"function setupRequestAnimationFrame() {\\n  const {\\n    callMicrotasks\\n  } = this._closure;\\n  const nativeRequestAnimationFrame = global.requestAnimationFrame;\\n  let animationFrameCallbacks = [];\\n  let lastNativeAnimationFrameTimestamp = -1;\\n  global.__flushAnimationFrame = function (frameTimestamp) {\\n    const currentCallbacks = animationFrameCallbacks;\\n    animationFrameCallbacks = [];\\n    currentCallbacks.forEach(function (f) {\\n      return f(frameTimestamp);\\n    });\\n    callMicrotasks();\\n  };\\n  global.requestAnimationFrame = function (callback) {\\n    animationFrameCallbacks.push(callback);\\n    if (animationFrameCallbacks.length === 1) {\\n      nativeRequestAnimationFrame(function (timestamp) {\\n        if (lastNativeAnimationFrameTimestamp >= timestamp) {\\n          return;\\n        }\\n        lastNativeAnimationFrameTimestamp = timestamp;\\n        global.__frameTimestamp = timestamp;\\n        global.__flushAnimationFrame(timestamp);\\n        global.__frameTimestamp = undefined;\\n      });\\n    }\\n    return -1;\\n  };\\n}\",\n  location: \"/Users/Shoaib/Awesome/node_modules/react-native-reanimated/lib/module/reanimated2/initializers.js\",\n  sourceMap: \"{\\\"version\\\":3,\\\"names\\\":[\\\"setupRequestAnimationFrame\\\",\\\"callMicrotasks\\\",\\\"_closure\\\",\\\"nativeRequestAnimationFrame\\\",\\\"global\\\",\\\"requestAnimationFrame\\\",\\\"animationFrameCallbacks\\\",\\\"lastNativeAnimationFrameTimestamp\\\",\\\"__flushAnimationFrame\\\",\\\"frameTimestamp\\\",\\\"currentCallbacks\\\",\\\"forEach\\\",\\\"f\\\",\\\"callback\\\",\\\"push\\\",\\\"length\\\",\\\"timestamp\\\",\\\"__frameTimestamp\\\",\\\"undefined\\\"],\\\"sources\\\":[\\\"/Users/Shoaib/Awesome/node_modules/react-native-reanimated/lib/module/reanimated2/initializers.js\\\"],\\\"mappings\\\":\\\"AAgFA,SAAAA,0BAASA,CAAA,EAA0B;EAAA;IAAAC;EAAA,SAAAC,QAAA;EAKjC,MAAMC,2BAA2B,GAAGC,MAAM,CAACC,qBAAqB;EAChE,IAAIC,uBAAuB,GAAG,EAAE;EAChC,IAAIC,iCAAiC,GAAG,CAAC,CAAC;EAC1CH,MAAM,CAACI,qBAAqB,GAAG,UAAAC,cAAc,EAAI;IAC/C,MAAMC,gBAAgB,GAAGJ,uBAAuB;IAChDA,uBAAuB,GAAG,EAAE;IAC5BI,gBAAgB,CAACC,OAAO,CAAC,UAAAC,CAAC;MAAA,OAAIA,CAAC,CAACH,cAAc,CAAC;IAAA,EAAC;IAChDR,cAAc,CAAC,CAAC;EAClB,CAAC;EACDG,MAAM,CAACC,qBAAqB,GAAG,UAAAQ,QAAQ,EAAI;IACzCP,uBAAuB,CAACQ,IAAI,CAACD,QAAQ,CAAC;IACtC,IAAIP,uBAAuB,CAACS,MAAM,KAAK,CAAC,EAAE;MAIxCZ,2BAA2B,CAAC,UAAAa,SAAS,EAAI;QACvC,IAAIT,iCAAiC,IAAIS,SAAS,EAAE;UAElD;QACF;QACAT,iCAAiC,GAAGS,SAAS;QAC7CZ,MAAM,CAACa,gBAAgB,GAAGD,SAAS;QACnCZ,MAAM,CAACI,qBAAqB,CAACQ,SAAS,CAAC;QACvCZ,MAAM,CAACa,gBAAgB,GAAGC,SAAS;MACrC,CAAC,CAAC;IACJ;IAKA,OAAO,CAAC,CAAC;EACX,CAAC;AACH\\\"}\"\n};\n\nvar setupRequestAnimationFrame = function () {\n  var _e = [new global.Error(), -2, -27];\n\n  var _f = function _f() {\n    var nativeRequestAnimationFrame = global.requestAnimationFrame;\n    var animationFrameCallbacks = [];\n    var lastNativeAnimationFrameTimestamp = -1;\n\n    global.__flushAnimationFrame = function (frameTimestamp) {\n      var currentCallbacks = animationFrameCallbacks;\n      animationFrameCallbacks = [];\n      currentCallbacks.forEach(function (f) {\n        return f(frameTimestamp);\n      });\n      callMicrotasks();\n    };\n\n    global.requestAnimationFrame = function (callback) {\n      animationFrameCallbacks.push(callback);\n\n      if (animationFrameCallbacks.length === 1) {\n        nativeRequestAnimationFrame(function (timestamp) {\n          if (lastNativeAnimationFrameTimestamp >= timestamp) {\n            return;\n          }\n\n          lastNativeAnimationFrameTimestamp = timestamp;\n          global.__frameTimestamp = timestamp;\n\n          global.__flushAnimationFrame(timestamp);\n\n          global.__frameTimestamp = undefined;\n        });\n      }\n\n      return -1;\n    };\n  };\n\n  _f._closure = {\n    callMicrotasks: callMicrotasks\n  };\n  _f.__initData = _worklet_9468165435498_init_data;\n  _f.__workletHash = 9468165435498;\n  _f.__stackDetails = _e;\n  _f.__version = \"3.3.0\";\n  return _f;\n}();\n\nvar _worklet_9801289261028_init_data = {\n  code: \"function anonymous() {\\n  const {\\n    runOnJS,\\n    reportFatalErrorOnJS,\\n    IS_CHROME_DEBUGGER,\\n    capturableConsole,\\n    IS_JEST,\\n    setupMicrotasks,\\n    setupRequestAnimationFrame\\n  } = this._closure;\\n  global.__ErrorUtils = {\\n    reportFatalError: function (error) {\\n      runOnJS(reportFatalErrorOnJS)({\\n        message: error.message,\\n        stack: error.stack\\n      });\\n    }\\n  };\\n  if (!IS_CHROME_DEBUGGER) {\\n    global.console = {\\n      assert: runOnJS(capturableConsole.assert),\\n      debug: runOnJS(capturableConsole.debug),\\n      log: runOnJS(capturableConsole.log),\\n      warn: runOnJS(capturableConsole.warn),\\n      error: runOnJS(capturableConsole.error),\\n      info: runOnJS(capturableConsole.info)\\n    };\\n  }\\n  if (!IS_JEST) {\\n    setupMicrotasks();\\n    setupRequestAnimationFrame();\\n  }\\n}\",\n  location: \"/Users/Shoaib/Awesome/node_modules/react-native-reanimated/lib/module/reanimated2/initializers.js\",\n  sourceMap: \"{\\\"version\\\":3,\\\"names\\\":[\\\"anonymous\\\",\\\"runOnJS\\\",\\\"reportFatalErrorOnJS\\\",\\\"IS_CHROME_DEBUGGER\\\",\\\"capturableConsole\\\",\\\"IS_JEST\\\",\\\"setupMicrotasks\\\",\\\"setupRequestAnimationFrame\\\",\\\"_closure\\\",\\\"global\\\",\\\"__ErrorUtils\\\",\\\"reportFatalError\\\",\\\"error\\\",\\\"message\\\",\\\"stack\\\",\\\"console\\\",\\\"assert\\\",\\\"debug\\\",\\\"log\\\",\\\"warn\\\",\\\"info\\\"],\\\"sources\\\":[\\\"/Users/Shoaib/Awesome/node_modules/react-native-reanimated/lib/module/reanimated2/initializers.js\\\"],\\\"mappings\\\":\\\"AA2IqB,SAAAA,SAAMA,CAAA;EAAA;IAAAC,OAAA;IAAAC,oBAAA;IAAAC,kBAAA;IAAAC,iBAAA;IAAAC,OAAA;IAAAC,eAAA;IAAAC;EAAA,SAAAC,QAAA;EAIvBC,MAAM,CAACC,YAAY,GAAG;IACpBC,gBAAgB,EAAE,SAAAA,CAAAC,KAAK,EAAI;MACzBX,OAAO,CAACC,oBAAoB,CAAC,CAAC;QAC5BW,OAAO,EAAED,KAAK,CAACC,OAAO;QACtBC,KAAK,EAAEF,KAAK,CAACE;MACf,CAAC,CAAC;IACJ;EACF,CAAC;EACD,IAAI,CAACX,kBAAkB,EAAE;IAGvBM,MAAM,CAACM,OAAO,GAAG;MACfC,MAAM,EAAEf,OAAO,CAACG,iBAAiB,CAACY,MAAM,CAAC;MACzCC,KAAK,EAAEhB,OAAO,CAACG,iBAAiB,CAACa,KAAK,CAAC;MACvCC,GAAG,EAAEjB,OAAO,CAACG,iBAAiB,CAACc,GAAG,CAAC;MACnCC,IAAI,EAAElB,OAAO,CAACG,iBAAiB,CAACe,IAAI,CAAC;MACrCP,KAAK,EAAEX,OAAO,CAACG,iBAAiB,CAACQ,KAAK,CAAC;MACvCQ,IAAI,EAAEnB,OAAO,CAACG,iBAAiB,CAACgB,IAAI;IACtC,CAAC;EACH;EACA,IAAI,CAACf,OAAO,EAAE;IACZC,eAAe,CAAC,CAAC;IACjBC,0BAA0B,CAAC,CAAC;EAC9B;AACF\\\"}\"\n};\nexport function initializeUIRuntime() {\n  NativeReanimatedModule.installCoreFunctions(callGuardDEV, valueUnpacker);\n  var IS_JEST = isJest();\n  var IS_CHROME_DEBUGGER = isChromeDebugger();\n\n  if (IS_JEST) {\n    global.requestAnimationFrame = function (callback) {\n      return setTimeout(function () {\n        return callback(performance.now());\n      }, 0);\n    };\n  }\n\n  var capturableConsole = _objectSpread({}, console);\n\n  runOnUIImmediately(function () {\n    var _e = [new global.Error(), -8, -27];\n\n    var _f = function _f() {\n      global.__ErrorUtils = {\n        reportFatalError: function reportFatalError(error) {\n          runOnJS(reportFatalErrorOnJS)({\n            message: error.message,\n            stack: error.stack\n          });\n        }\n      };\n\n      if (!IS_CHROME_DEBUGGER) {\n        global.console = {\n          assert: runOnJS(capturableConsole.assert),\n          debug: runOnJS(capturableConsole.debug),\n          log: runOnJS(capturableConsole.log),\n          warn: runOnJS(capturableConsole.warn),\n          error: runOnJS(capturableConsole.error),\n          info: runOnJS(capturableConsole.info)\n        };\n      }\n\n      if (!IS_JEST) {\n        setupMicrotasks();\n        setupRequestAnimationFrame();\n      }\n    };\n\n    _f._closure = {\n      runOnJS: runOnJS,\n      reportFatalErrorOnJS: reportFatalErrorOnJS,\n      IS_CHROME_DEBUGGER: IS_CHROME_DEBUGGER,\n      capturableConsole: capturableConsole,\n      IS_JEST: IS_JEST,\n      setupMicrotasks: setupMicrotasks,\n      setupRequestAnimationFrame: setupRequestAnimationFrame\n    };\n    _f.__initData = _worklet_9801289261028_init_data;\n    _f.__workletHash = 9801289261028;\n    _f.__stackDetails = _e;\n    _f.__version = \"3.3.0\";\n    return _f;\n  }())();\n}","map":{"version":3,"sources":["initializers.ts"],"names":["reportFatalErrorOnJS","NativeReanimatedModule","isChromeDebugger","isJest","runOnJS","setupMicrotasks","callMicrotasks","runOnUIImmediately","callGuardDEV","fn","args","e","global","__ErrorUtils","reportFatalError","valueUnpacker","objectToUnpack","category","workletsCache","__workletsCache","handleCache","__handleCache","undefined","Map","WeakMap","workletHash","__workletHash","workletFun","get","initData","__initData","evalWithSourceMap","code","location","sourceMap","evalWithSourceUrl","eval","set","functionInstance","bind","_recur","__init","value","fun","Error","__remoteFunction","setupRequestAnimationFrame","nativeRequestAnimationFrame","requestAnimationFrame","animationFrameCallbacks","lastNativeAnimationFrameTimestamp","__flushAnimationFrame","frameTimestamp","currentCallbacks","forEach","f","callback","push","length","timestamp","__frameTimestamp","initializeUIRuntime","installCoreFunctions","IS_JEST","IS_CHROME_DEBUGGER","setTimeout","performance","now","capturableConsole","console","error","message","stack","assert","debug","log","warn","info"],"mappings":"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","sourcesContent":["import { reportFatalErrorOnJS } from './errors';\nimport NativeReanimatedModule from './NativeReanimated';\nimport { isChromeDebugger, isJest } from './PlatformChecker';\nimport {\n  runOnJS,\n  setupMicrotasks,\n  callMicrotasks,\n  runOnUIImmediately,\n} from './threads';\n\n// callGuard is only used with debug builds\nfunction callGuardDEV<T extends Array<any>, U>(\n  fn: (...args: T) => U,\n  ...args: T\n): void {\n  'worklet';\n  try {\n    fn(...args);\n  } catch (e) {\n    if (global.__ErrorUtils) {\n      global.__ErrorUtils.reportFatalError(e as Error);\n    } else {\n      throw e;\n    }\n  }\n}\n\nfunction valueUnpacker(objectToUnpack: any, category?: string): any {\n  'worklet';\n  let workletsCache = global.__workletsCache;\n  let handleCache = global.__handleCache;\n  if (workletsCache === undefined) {\n    // init\n    workletsCache = global.__workletsCache = new Map();\n    handleCache = global.__handleCache = new WeakMap();\n  }\n  const workletHash = objectToUnpack.__workletHash;\n  if (workletHash !== undefined) {\n    let workletFun = workletsCache.get(workletHash);\n    if (workletFun === undefined) {\n      const initData = objectToUnpack.__initData;\n      if (global.evalWithSourceMap) {\n        // if the runtime (hermes only for now) supports loading source maps\n        // we want to use the proper filename for the location as it guarantees\n        // that debugger understands and loads the source code of the file where\n        // the worklet is defined.\n        workletFun = global.evalWithSourceMap(\n          '(' + initData.code + '\\n)',\n          initData.location,\n          initData.sourceMap\n        ) as (...args: any[]) => any;\n      } else if (global.evalWithSourceUrl) {\n        // if the runtime doesn't support loading source maps, in dev mode we\n        // can pass source url when evaluating the worklet. Now, instead of using\n        // the actual file location we use worklet hash, as it the allows us to\n        // properly symbolicate traces (see errors.ts for details)\n        workletFun = global.evalWithSourceUrl(\n          '(' + initData.code + '\\n)',\n          `worklet_${workletHash}`\n        ) as (...args: any[]) => any;\n      } else {\n        // in release we use the regular eval to save on JSI calls\n        // eslint-disable-next-line no-eval\n        workletFun = eval('(' + initData.code + '\\n)') as (\n          ...args: any[]\n        ) => any;\n      }\n      workletsCache.set(workletHash, workletFun);\n    }\n    const functionInstance = workletFun.bind(objectToUnpack);\n    objectToUnpack._recur = functionInstance;\n    return functionInstance;\n  } else if (objectToUnpack.__init) {\n    let value = handleCache!.get(objectToUnpack);\n    if (value === undefined) {\n      value = objectToUnpack.__init();\n      handleCache!.set(objectToUnpack, value);\n    }\n    return value;\n  } else if (category === 'RemoteFunction') {\n    const fun = () => {\n      throw new Error(`Tried to synchronously call a non-worklet function on the UI thread.\n\nPossible solutions are:\n  a) If you want to synchronously execute this method, mark it as a worklet\n  b) If you want to execute this function on the JS thread, wrap it using \\`runOnJS\\``);\n    };\n    fun.__remoteFunction = objectToUnpack;\n    return fun;\n  } else {\n    throw new Error('data type not recognized by unpack method');\n  }\n}\n\nfunction setupRequestAnimationFrame() {\n  'worklet';\n\n  // Jest mocks requestAnimationFrame API and it does not like if that mock gets overridden\n  // so we avoid doing requestAnimationFrame batching in Jest environment.\n  const nativeRequestAnimationFrame = global.requestAnimationFrame;\n\n  let animationFrameCallbacks: Array<(timestamp: number) => void> = [];\n  let lastNativeAnimationFrameTimestamp = -1;\n\n  global.__flushAnimationFrame = (frameTimestamp: number) => {\n    const currentCallbacks = animationFrameCallbacks;\n    animationFrameCallbacks = [];\n    currentCallbacks.forEach((f) => f(frameTimestamp));\n    callMicrotasks();\n  };\n\n  global.requestAnimationFrame = (\n    callback: (timestamp: number) => void\n  ): number => {\n    animationFrameCallbacks.push(callback);\n    if (animationFrameCallbacks.length === 1) {\n      // We schedule native requestAnimationFrame only when the first callback\n      // is added and then use it to execute all the enqueued callbacks. Once\n      // the callbacks are run, we clear the array.\n      nativeRequestAnimationFrame((timestamp) => {\n        if (lastNativeAnimationFrameTimestamp >= timestamp) {\n          // Make sure we only execute the callbacks once for a given frame\n          return;\n        }\n        lastNativeAnimationFrameTimestamp = timestamp;\n        global.__frameTimestamp = timestamp;\n        global.__flushAnimationFrame(timestamp);\n        global.__frameTimestamp = undefined;\n      });\n    }\n    // Reanimated currently does not support cancelling callbacks requested with\n    // requestAnimationFrame. We return -1 as identifier which isn't in line\n    // with the spec but it should give users better clue in case they actually\n    // attempt to store the value returned from rAF and use it for cancelling.\n    return -1;\n  };\n}\n\nexport function initializeUIRuntime() {\n  NativeReanimatedModule.installCoreFunctions(callGuardDEV, valueUnpacker);\n\n  const IS_JEST = isJest();\n  const IS_CHROME_DEBUGGER = isChromeDebugger();\n\n  if (IS_JEST) {\n    // requestAnimationFrame react-native jest's setup is incorrect as it polyfills\n    // the method directly using setTimeout, therefore the callback doesn't get the\n    // expected timestamp as the only argument: https://github.com/facebook/react-native/blob/main/jest/setup.js#L28\n    // We override this setup here to make sure that callbacks get the proper timestamps\n    // when executed. For non-jest environments we define requestAnimationFrame in setupRequestAnimationFrame\n    // @ts-ignore TypeScript uses Node definition for rAF, setTimeout, etc which returns a Timeout object rather than a number\n    global.requestAnimationFrame = (callback: (timestamp: number) => void) => {\n      return setTimeout(() => callback(performance.now()), 0);\n    };\n  }\n\n  // We really have to create a copy of console here. Function runOnJS we use on elements inside\n  // this object makes it not configurable\n  const capturableConsole = { ...console };\n  runOnUIImmediately(() => {\n    'worklet';\n    // setup error handler\n    global.__ErrorUtils = {\n      reportFatalError: (error: Error) => {\n        runOnJS(reportFatalErrorOnJS)({\n          message: error.message,\n          stack: error.stack,\n        });\n      },\n    };\n\n    if (!IS_CHROME_DEBUGGER) {\n      // setup console\n      // @ts-ignore TypeScript doesn't like that there are missing methods in console object, but we don't provide all the methods for the UI runtime console version\n      global.console = {\n        assert: runOnJS(capturableConsole.assert),\n        debug: runOnJS(capturableConsole.debug),\n        log: runOnJS(capturableConsole.log),\n        warn: runOnJS(capturableConsole.warn),\n        error: runOnJS(capturableConsole.error),\n        info: runOnJS(capturableConsole.info),\n      };\n    }\n\n    if (!IS_JEST) {\n      setupMicrotasks();\n      setupRequestAnimationFrame();\n    }\n  })();\n}\n"]},"metadata":{},"sourceType":"module"}